<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>アルマトイ — インフォグラフィック</title>
  <style>
    :root{--bg:#0b0f14;--panel:#0f141b;--text:#e9f0f5;--muted:#b6c2d0;--line:rgba(255,255,255,.12);--max:#ef4444;--min:#3b82f6}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:#0b0f14;color:#e9f0f5;line-height:1.6}
    .container{max-width:1000px;margin:0 auto;padding:24px}
    h1{margin:0 0 16px} h2{margin:12px 0}
    a{color:#60a5fa;text-decoration:none}
    .chart{border:1px solid var(--line);border-radius:12px;padding:16px;background:#0f141b;margin:16px 0}
    .legend{display:flex;gap:16px;flex-wrap:wrap;color:var(--muted);font-size:14px;margin-bottom:8px}
    .legend .dot{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:6px}
    .axis{stroke:rgba(255,255,255,.35)} .frame{fill:none;stroke:rgba(255,255,255,.18)}
    .bar{position:relative;height:24px;margin:30px 0 22px;border-radius:8px;background:rgba(34,197,94,.18);overflow:hidden}
    .bar label{position:absolute;left:10px;top:-22px;color:var(--muted);font-size:12px}
    .bar span{position:absolute;left:0;top:0;height:100%;background:linear-gradient(90deg,#22c55e,#60a5fa);width:0}
    .bar .val{position:absolute;right:8px;top:0;height:100%;display:flex;align-items:center;font-size:12px;color:#fff;font-weight:600;text-shadow:0 1px 1px rgba(0,0,0,.4)}
    footer{color:var(--muted);font-size:13px;margin-top:18px}
    .back{margin-bottom:8px}
  </style>
</head>
<body>
  <div class="container">
    <p class="back"><a href="index.html">← 戻る</a></p>
    <h1>アルマトイ — インフォグラフィック</h1>

    <div class="legend">
      <span><span class="dot" style="background:var(--max)"></span>最高気温</span>
      <span><span class="dot" style="background:var(--min)"></span>最低気温</span>
    </div>

    <section class="chart">
      <h2>人口の推移（デモデータ）</h2>
      <div class="bar"><label>2010</label><span data-value="1600"></span><strong class="val"></strong></div>
      <div class="bar"><label>2015</label><span data-value="1750"></span><strong class="val"></strong></div>
      <div class="bar"><label>2020</label><span data-value="1900"></span><strong class="val"></strong></div>
      <div class="bar"><label>2024</label><span data-value="2000"></span><strong class="val"></strong></div>
    </section>

    <section class="chart">
      <h2>月別気温（°C）</h2>
      <svg id="lineChart" viewBox="0 0 720 260" preserveAspectRatio="xMidYMid meet">
        <rect x="40" y="20" width="600" height="200" class="frame"/>
        <line x1="40" y1="220" x2="640" y2="220" class="axis"/>
        <line x1="40" y1="20"  x2="40"  y2="220" class="axis"/>
        <g stroke="rgba(255,255,255,.15)">
          <line x1="40" x2="640" y1="220" y2="220"/>
          <line x1="40" x2="640" y1="180" y2="180"/>
          <line x1="40" x2="640" y1="140" y2="140"/>
          <line x1="40" x2="640" y1="100" y2="100"/>
          <line x1="40" x2="640" y1="60"  y2="60"/>
          <line x1="40" x2="640" y1="20"  y2="20"/>
        </g>
        <g fill="#b6c2d0" font-size="12" text-anchor="end">
          <text x="34" y="224">-15</text>
          <text x="34" y="184">-5</text>
          <text x="34" y="144">5</text>
          <text x="34" y="104">15</text>
          <text x="34" y="64">25</text>
          <text x="34" y="24">35</text>
        </g>
        <g fill="#b6c2d0" font-size="12">
          <text x="60"  y="240">1月</text><text x="105" y="240">2月</text>
          <text x="150" y="240">3月</text><text x="195" y="240">4月</text>
          <text x="240" y="240">5月</text><text x="285" y="240">6月</text>
          <text x="330" y="240">7月</text><text x="375" y="240">8月</text>
          <text x="420" y="240">9月</text><text x="465" y="240">10月</text>
          <text x="510" y="240">11月</text><text x="555" y="240">12月</text>
        </g>
        <polyline id="maxLine" fill="none" stroke="var(--max)" stroke-width="3" points=""/>
        <polyline id="minLine" fill="none" stroke="var(--min)" stroke-width="3" points=""/>
      </svg>
    </section>

    <footer>データはデモ用です。1年分（1月〜12月）の最高/最低気温と人口推移を表示しています。</footer>
  </div>

  <script>
    // ==== 設定 ====
    const MAX_BAR = 2000; // 人口バーの最大スケール（1600〜2000想定）
    const YMIN = -15, YMAX = 35;
    const X0 = 60, STEP = 45, YH = 200, Y0 = 220;

    // 月別気温（°C）
    const MAX_TEMPS = [-2, 0, 6, 13, 20, 25, 29, 28, 22, 15, 7, 1];
    const MIN_TEMPS = [-12, -10, -4, 2, 8, 13, 16, 15, 9, 3, -3, -8];

    // ==== バー ====
    document.querySelectorAll('.bar').forEach((bar,i)=>{
      const span = bar.querySelector('span');
      const val  = bar.querySelector('.val');
      const v = Number(span.getAttribute('data-value') || 0);
      const pct = Math.min(100, (v / MAX_BAR) * 100);
      span.style.width = pct + '%';
      if (span.animate) span.animate([{width:'0%'},{width:pct+'%'}], {duration:900 + i*180, fill:'forwards'});
      if (val) val.textContent = v.toLocaleString('ja-JP');
    });

    // ==== 折れ線グラフ ====
    function toPoints(arr){
      return arr.map((t,i)=>{
        const x = X0 + STEP*i;
        const y = Y0 - ((t - YMIN) / (YMAX - YMIN)) * YH;
        return x+','+y.toFixed(1);
      }).join(' ');
    }
    const maxLine = document.getElementById('maxLine');
    const minLine = document.getElementById('minLine');
    if (maxLine && minLine){
      maxLine.setAttribute('points', toPoints(MAX_TEMPS));
      minLine.setAttribute('points', toPoints(MIN_TEMPS));
      if (maxLine.animate) maxLine.animate([{strokeDasharray:'0 900'},{strokeDasharray:'900 0'}], {duration:1400, fill:'forwards'});
      if (minLine.animate) minLine.animate([{strokeDasharray:'0 900'},{strokeDasharray:'900 0'}], {duration:1400, delay:120, fill:'forwards'});
    }
  </script>
</body>
</html>
